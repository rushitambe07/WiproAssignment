You are designing a ride booking system where two microservices, Rider Service and Uber Service, communicate asynchronously via Kafka message broker.

The Rider Service exposes a REST API /ride to accept booking requests.

When a user requests a ride, the Rider Service:

Stores the booking request in its database.

Publishes a message with booking details to a Kafka topic R2U (Rider to Uber).

The Uber Service consumes messages from the R2U topic, processes the booking, stores relevant data in its database, and sends status updates or responses back by publishing messages to another Kafka topic U2R (Uber to Rider).

The Rider Service consumes messages from the U2R topic to update ride statusÂ accordingly.